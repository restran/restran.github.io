function sceneMain(a,b,c){SCENE_BEGIN=!0;var d=a.getContext("2d"),e=new Frame(0,0,b,c);e.ctx=d,e.begin(25);var f=0;f+=sceneOne(d,e)+500;var g=12,h=setInterval(function(){clearInterval(h),e.clearAll(),sceneTwo(d,e,g)},f);f+=(g-1)*500+85*e.inv+1500;var i=1,j=setInterval(function(){clearInterval(j),e.clearAll(),sceneThree(d,e,b);var a=setInterval(function(){i--<=0?clearInterval(a):(e.clearAll(),sceneThree(d,e,b))},140*e.inv)},f);f+=140*e.inv*(i+1);var k=setInterval(function(){clearInterval(k),e.clearAll(),sceneFour(d,e,b)},f);f+=200*e.inv+1e3;var l=setInterval(function(){clearInterval(l),e.clearAll(),sceneFive(d,e)},f)}function sceneOne(a,b){var c="\u90a3\u4e9b\u770b\u4f3c\u7ec6\u5c0f\u3001\u5fae\u4e0d\u8db3\u9053\u7684\u4e1c\u897f\uff0c\u5728\u7279\u5b9a\u7684\u65f6\u673a\u3001\u7279\u5b9a\u7684\u4f4d\u7f6e\uff0c",d="\u4e5f\u53ef\u4ee5\u6784\u6210\u7279\u6b8a\u7684\u610f\u4e49\u3002",e=22,f=new Array(c.length),g=new Array(d.length),h=1e3,i=0,j,k;j=0;var l=0,m=setInterval(function(){j<c.length?(f[j]=new Word(a,50+e*j,150,c[j]),f[j].font=e+"px \u9ed1\u4f53",f[j].fontSize=e,f[j].color=colorArr[3].clone(),h=1e3,f[j].fade(h,"in"),b.addSprite(l++,f[j]),j++):clearInterval(m)},150);k=0,i+=(c.length-1)*150+(h-150)+800;var n=setInterval(function(){clearInterval(n);var c=setInterval(function(){k<d.length?(g[k]=new Word(a,50+e*k,190,d[k]),g[k].font=e+"px \u9ed1\u4f53",g[k].fontSize=e,g[k].color=colorArr[3].clone(),g[k].fade(h,"in"),b.addSprite(l++,g[k]),k++):clearInterval(c)},150)},i);i+=(d.length-1)*150+(h-150)+1200;var o=setInterval(function(){clearInterval(o);for(var a in b.sprites)b.sprites[a].fade(1e3,"out")},i);return i+=1200,i}function sceneTwo(a,b,c){var d,e,f,g,h,i=setInterval(function(){if(c--<=0){clearInterval(i);return}e=100+Math.floor(Math.random()*700),f=100+Math.floor(Math.random()*150);var j=new Array;g=4+Math.floor(Math.random()*3),h=30+Math.floor(Math.random()*15);for(d=0;d<cosSmile.length;d++)j[d]=new Array(3),j[d][0]=e+cosSmile[d][0]*g,j[d][1]=f+cosSmile[d][1]*g,j[d][2]=h;var k=new Firework(a,colorArr[Math.floor(Math.random()*colorArr.length)].clone(),.2);k.fw=new CirclePart(a,e,550,.95,.25,0,0,0,k.color.clone(),10),k.pse=new CirclePart(a,0,0,.95,.25,0,0,0,k.color.clone(),5),k.rise(f,40,b.inv,20,j),b.addSprite(c,k)},500)}function sceneThree(a,b,c){var d=12,e=d,f=4,g=Math.round((c-164*f)/2),h=220,i=100,j=cosDat.length,k,l,m,n=new Array(j),o=0;for(k=0;k<j;k++)n[k]=!1;var p=setInterval(function(){if(d--<=0){clearInterval(p);return}var c=new Array;for(k=0;k<8;k++){l=Math.floor(Math.random()*j),m=l;if(n[l]==1&&o<j)do l=(l+1)%j;while(n[l]==1&&l!=m);n[l]=!0,o++,c[k]=new Array(3),c[k][0]=g+cosDat[l][0]*f,c[k][1]=h+cosDat[l][1]*f,c[k][2]=84-(e-d)*(i/b.inv)}var q=new Firework(a,colorArr[Math.floor(Math.random()*colorArr.length)].clone(),.5);q.fw=new CirclePart(a,100+Math.floor(Math.random()*700),550,.95,.25,0,0,0,q.color.clone(),10),q.pse=new CirclePart(a,0,0,.95,.25,0,0,0,q.color.clone(),5),q.rise(Math.floor(Math.random()*150),40,25,20,c),b.addSprite(d,q)},i)}function sceneFour(a,b,c){var d=4,e=Math.round((c-164*d)/2),f=200,g=cosDat.length,h,i,j,k=500,l=new Array(11,14,13,19);i=0,j=0;var m=setInterval(function(){if(i>=l.length){clearInterval(m);return}var c=new Array(l[i]);for(h=0;h<l[i];h++)c[h]=new Array(3),c[h][0]=e+cosDat[j][0]*d,c[h][1]=f+cosDat[j][1]*d,c[h][2]=180-i*(k/b.inv)-40,j++;var g=new Firework(a,colorArr[i].clone(),.2);g.fw=new CirclePart(a,850,550,.95,.25,0,0,0,g.color.clone(),10),g.pse=new CirclePart(a,0,0,.95,.25,0,0,0,g.color.clone(),5),g.rise(80,40,25,25,c),b.addSprite(i,g),i++},k)}function sceneFive(a,b){var c="\u56e0\u4e3a\uff0c",d="\u3002\u3002\u3002",e="\u662f\u523b\u610f\u7684\u3002",f=22,g=new Array(c.length),h=new Array(d.length),i=new Array(e.length),j=1500,k=0,l,m,n;l=0;var o=0,p=100,q=setInterval(function(){l<c.length?(p+=f,g[l]=new Word(a,p,200,c[l]),g[l].font=f+"px \u9ed1\u4f53",g[l].fontSize=f,g[l].color=colorArr[0].clone(),g[l].fade(j,"in"),b.addSprite(o++,g[l]),l++):clearInterval(q)},200);m=0,k+=(c.length-1)*200+(j-200);var r=setInterval(function(){clearInterval(r);var c=setInterval(function(){m<d.length?(p+=f,h[m]=new Word(a,p,200,d[m]),h[m].font=f+"px \u9ed1\u4f53",h[m].fontSize=f,h[m].color=colorArr[0].clone(),h[m].fade(j,"in"),b.addSprite(o++,h[m]),m++):clearInterval(c)},1500)},k);k+=(d.length-1)*1500+(j-1500)+j*2,n=0;var s=setInterval(function(){clearInterval(s);var c=setInterval(function(){n<e.length?(p+=f,i[n]=new Word(a,p,200,e[n]),i[n].font=f+"px \u9ed1\u4f53",i[n].fontSize=f,i[n].color=colorArr[0].clone(),i[n].fade(j,"in"),b.addSprite(o++,i[n]),n++):clearInterval(c)},200)},k);k+=(e.length-1)*200+(j-200)+j;var t=setInterval(function(){clearInterval(t);for(var a in b.sprites)b.sprites[a].fade(1e3,"out")},k);k+=1200;var u=setInterval(function(){clearInterval(u),b.clearAll(),b.stop(),SCENE_BEGIN=!1},k)}var Color=function(a,b,c,d){this.r=a,this.g=b,this.b=c,this.a=d};Color.prototype.clone=function(){return new Color(this.r,this.g,this.b,this.a)},Color.prototype.getRGBAStr=function(){return"rgba("+this.r+","+this.g+","+this.b+","+this.a+")"};var Sprite=function(){this.bgc="rgb(255, 255, 255)",this.x=0,this.y=0,this.inv=25,this.color=new Color(0,0,0,1),this.speed={x:1,y:1}};Sprite.prototype={draw:function(){},erase:function(){},move:function(){this.x+=this.speed.x,this.y+=this.speed.y;if(this.childs!=null&&this.childs.length>0)for(var a=0;a<this.childs.length;a++)this.childs[a].speed=this.speed,this.childs[a].move()},fade:function(a,b){var c=a/this.inv,d=1/c;c++,b=="in"?this.color.a=0:(this.color.a=1,d*=-1);var e=setInterval(function(a,d){return function(){c--<=0?(a.color.a=b=="in"?1:0,clearInterval(e)):a.color.a+=d}}(this,d),this.inv)},appendChild:function(a){this.childs==null&&(this.childs=[]),this.childs.push(a)},drawChild:function(){if(this.childs!=null&&this.childs.length>0)for(var a=0;a<this.childs.length;a++)this.childs[a].draw()}};var Frame=function(a,b,c,d){this.interval=null,this.inv=25,this.sprites=[],this.x=a,this.y=b,this.w=c,this.h=d};Frame.prototype={begin:function(a){this.inv=a,this.interval=setInterval(function(a){return function(){a.render()}}(this),a)},render:function(){this.ctx.clearRect(this.x,this.y,this.w,this.h);for(var a in this.sprites){if(typeof this.sprites[a]=="function")continue;this.sprites[a].draw()}},addSprite:function(a,b){this.sprites[a]=b},stop:function(){clearInterval(this.interval)},clear:function(){for(var a in this.sprites)this.sprites[a].x>this.w&&this.sprites[a].y>this.h&&delete this.sprites[a]},clearAll:function(){for(var a in this.sprites)delete this.sprites[a]}};var Word=function(a,b,c,d){this.ctx=a,this.x=b,this.y=c,this.fontSize=14,this.font="14px sans-serif",this.c=d,this.flag=!1,this.ready=!1};Word.prototype=new Sprite,Word.prototype.draw=function(){this.ctx.fillStyle=this.color.getRGBAStr(),this.ctx.font=this.font,this.ctx.textBaseline="top",this.ctx.fillText(this.c,this.x,this.y),this.drawChild()};var Particle=function(a,b,c,d,e,f,g,h,i){this.ctx=a,this.x=b,this.y=c,this.dec=d,this.g=e,this.vx=f,this.vy=g,this.eng=h,this.color=i};Particle.prototype=new Sprite,Particle.prototype.sizeOK=function(){},Particle.prototype.zoom=function(a){},Particle.prototype.sizeRand=function(a){},Particle.prototype.clone=function(){return new Particle(this.ctx,this.x,this.y,this.dec,this.g,this.vx,this.vy,this.eng,this.color.clone())},Particle.prototype.move=function(){this.vx*=this.dec,this.vy*=this.dec,this.vy+=this.g,this.x+=this.vx,this.y+=this.vy,this.eng*=this.dec},Particle.prototype.fadeOut=function(a,b){var c=1/a,d=setInterval(function(b,c){return function(){a--<=0?(b.color.a=0,b.dead=!0,clearInterval(d)):b.color.a-=c}}(this,c),b)},Particle.prototype.setMoveTo=function(a,b,c){var d=this.dec/(1-this.dec),e=Math.pow(this.dec,c-1),f=(1-e*this.dec)*d;this.vx=(a-this.x)/f;var g=this.g*(d*(c-1-d*(1-e))+c);this.vy=(b-this.y-g)/f,this.eng=.1/Math.pow(this.dec,c)};var RectPart=function(a,b,c,d,e,f,g,h,i,j,k){this.ctx=a,this.x=b,this.y=c,this.dec=d,this.g=e,this.vx=f,this.vy=g,this.eng=h,this.color=i,this.w=j,this.h=k};RectPart.prototype=new Particle,RectPart.prototype.sizeOK=function(){return this.w>0&&this.h>0?!0:!1},RectPart.prototype.zoom=function(a){this.w*=a,this.h*=a},RectPart.prototype.clone=function(){return new RectPart(this.ctx,this.x,this.y,this.dec,this.g,this.vx,this.vy,this.eng,this.color.clone(),this.w,this.h)},RectPart.prototype.sizeRand=function(a){this.w*=1-a+Math.random()*a*2,this.w=Math.floor(this.w),this.h*=1-a+Math.random()*a*2,this.h=Math.floor(this.h)},RectPart.prototype.draw=function(){this.ctx.fillStyle=this.color.getRGBAStr(),this.ctx.fillRect(this.x,this.y,this.w,this.h)};var CirclePart=function(a,b,c,d,e,f,g,h,i,j){this.ctx=a,this.x=b,this.y=c,this.dec=d,this.g=e,this.vx=f,this.vy=g,this.eng=h,this.color=i,this.r=j};CirclePart.prototype=new Particle,CirclePart.prototype.draw=function(){this.ctx.fillStyle=this.color.getRGBAStr(),this.ctx.beginPath(),this.ctx.arc(this.x,this.y,this.r,0,Math.PI*2),this.ctx.closePath(),this.ctx.fill()},CirclePart.prototype.zoom=function(a){this.r*=a},CirclePart.prototype.sizeOK=function(){return this.r>0?!0:!1},CirclePart.prototype.clone=function(){return new CirclePart(this.ctx,this.x,this.y,this.dec,this.g,this.vx,this.vy,this.eng,this.color.clone(),this.r)},CirclePart.prototype.sizeRand=function(a){this.r*=1-a+Math.random()*a*2,this.r=Math.floor(this.r)};var Firework=function(a,b,c){this.ctx=a,this.color=b,this.fw=null,this.ps=new Array,this.pse=null,this.hasExplode=!1,this.srper=c};Firework.prototype=new Sprite,Firework.prototype.rise=function(a,b,c,d,e){this.fw.setMoveTo(this.fw.x,a,b);var f=b,g=setInterval(function(a){return function(){f--<=0?(a.explode(d,e,c),clearInterval(g)):a.fw.move()}}(this),c)},Firework.prototype.explode=function(a,b,c){this.ps=new Array(a),this.hasExplode=!0;var d,e,f,g,h,i,j,k,l,m;l=.5,this.pse.x=this.fw.x,this.pse.y=this.fw.y;for(j=0;j<a;j++)this.ps[j]=this.pse.clone(),this.ps[j].sizeRand(this.srper);for(j=0;j<b.length;j++)this.ps[j].setMoveTo(b[j][0],b[j][1],b[j][2]),this.ps[j].eng<l&&(l=this.ps[j].eng);l-=.2;for(j=b.length;j<a;j++)d=Math.random()*Math.PI*2,e=1+Math.random()*15,f=Math.cos(d)*e,g=Math.sin(d)*e,this.ps[j].vx=f,this.ps[j].vy=g,m=l*(.7+Math.random()*.6),this.ps[j].eng=m;var n=setInterval(function(a){return function(){a.ps.length==0&&clearInterval(n);for(j in a.ps)a.ps[j].eng<=.1?a.ps[j].color.a<=0||!a.ps[j].sizeOK?a.ps.splice(j,1):(a.ps[j].color.a-=.05,a.ps[j].zoom(.9),a.ps[j].move()):a.ps[j].move()}}(this),c)},Firework.prototype.draw=function(){if(this.hasExplode==1)for(i in this.ps)this.ps[i].color.a>0&&this.ps[i].sizeOK&&this.ps[i].draw();else this.fw.draw()};var SCENE_BEGIN=!1,colorArr=new Array(new Color(229,82,28,1),new Color(245,160,27,1),new Color(112,171,98,1),new Color(37,141,205,1)),cosDat=new Array([0,0],[0,6],[0,12],[0,18],[0,24],[0,30],[0,36],[6,36],[12,36],[18,36],[24,36],[50,0],[56,0],[44,6],[62,6],[40,12],[66,12],[40,18],[66,18],[40,24],[66,24],[44,30],[62,30],[50,36],[56,36],[82,0],[118,0],[85,6],[115,6],[88,12],[112,12],[91,18],[109,18],[94,24],[106,24],[97,30],[103,30],[100,36],[135,0],[141,0],[147,0],[153,0],[159,0],[135,6],[135,12],[135,18],[141,18],[147,18],[153,18],[159,18],[135,24],[135,30],[135,36],[141,36],[147,36],[153,36],[159,36]),cosSmile=new Array([-15,-15],[15,-15],[-22,10],[22,10],[-19,14],[19,14],[-15,17],[15,17],[-10,19],[10,19],[-5,20],[5,20],[0,20])