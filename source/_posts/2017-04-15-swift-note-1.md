---
title: Swift å­¦ä¹ ç¬”è®° 1 - åŸºç¡€éƒ¨åˆ†
layout: post
category: [æŠ€æœ¯]
tagline: 
tags: [Swift]
---

## æ•°æ®ç±»å‹

åŸºç¡€æ•°æ®ç±»å‹

- Intè¡¨ç¤ºæ•´å‹å€¼
- Double å’Œ Float è¡¨ç¤ºæµ®ç‚¹å‹å€¼
- Bool æ˜¯å¸ƒå°”å‹å€¼
- String æ˜¯æ–‡æœ¬å‹æ•°æ®

é›†åˆç±»å‹

- æ•°ç»„ Array
- é›†åˆ Set
- å­—å…¸ Dictionary
- å…ƒç»„ï¼ˆTupleï¼‰ï¼Œå…ƒç»„å¯ä»¥åˆ›å»ºæˆ–è€…ä¼ é€’ä¸€ç»„æ•°æ®ï¼Œæ¯”å¦‚ä½œä¸ºå‡½æ•°çš„è¿”å›å€¼æ—¶ï¼Œå¯ä»¥ç”¨ä¸€ä¸ªå…ƒç»„è¿”å›å¤šä¸ªå€¼

å¯é€‰ï¼ˆOptionalï¼‰ç±»å‹

- ç”¨äºå¤„ç†å€¼ç¼ºå¤±çš„æƒ…å†µï¼Œå¯é€‰è¡¨ç¤ºâ€œé‚£æœ‰ä¸€ä¸ªå€¼ï¼Œå¹¶ä¸”å®ƒç­‰äºxâ€ï¼Œæˆ–è€…â€œé‚£æ²¡æœ‰å€¼â€

```swift
// å¯é€‰ç±»å‹åŠ ä¸Šä¸€ä¸ª ? æ¥è¡¨ç¤º
var foo: Int? = 404
```

## å¸¸é‡å’Œå˜é‡

å¸¸é‡å’Œå˜é‡å¿…é¡»åœ¨ä½¿ç”¨å‰å£°æ˜ï¼Œç”¨ let æ¥å£°æ˜å¸¸é‡ï¼Œç”¨ var æ¥å£°æ˜å˜é‡ã€‚å¯ä»¥ç”¨ä»»ä½•å­—ç¬¦ä½œä¸ºå¸¸é‡å’Œå˜é‡åï¼ŒåŒ…æ‹¬ Unicode å­—ç¬¦ï¼Œä¹Ÿå°±æ˜¯è¯´å˜é‡åå¯ä»¥ç”¨ä¸­æ–‡ã€‚

Swift è·Ÿ Python ä¸€æ ·ï¼Œä¸éœ€è¦ç”¨ `;` ä½œä¸ºä»£ç çš„ç»“å°¾ã€‚

```swift
let foo = 10
var bar = 0
let ä½ å¥½ = "ä½ å¥½ä¸–ç•Œ"
```

å’Œ Python ä¸€æ ·ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ `;` å°†å¤šè¡Œä»£ç å†™æˆä¸€è¡Œ

```swift
let cat = "ğŸ±"; print(cat)
```

å¯ä»¥åœ¨ä¸€è¡Œä¸­å£°æ˜å¤šä¸ªå¸¸é‡æˆ–è€…å¤šä¸ªå˜é‡ï¼Œç”¨é€—å·éš”å¼€

```swift
var x = 0.0, y = 0.0, z = 0.0
```

ç±»å‹æ ‡æ³¨

```swift
var foo: String
// æ²¡æœ‰æ ‡æ³¨ç±»å‹ï¼Œä½†æ˜¯ä¼šè‡ªåŠ¨æ¨å¯¼å‡ºç±»ä¼¼ä¸ºå­—ç¬¦ä¸²
var bar = "foo" 
// å¯ä»¥åœ¨ä¸€è¡Œä¸­å®šä¹‰å¤šä¸ªåŒæ ·ç±»å‹çš„å˜é‡
var red, green, blue: Double
```

ç±»å‹åˆ«å

```swift
// ä»¥å NewType å°±ç­‰ä»·äº UInt16
typealias NewType = UInt16
```

## éšå¼è§£æå¯é€‰ç±»å‹

å¦‚æœå¯ä»¥ç¡®å®šä¸€ä¸ªå¯é€‰ç±»å‹ä¸€å®šä¼šæœ‰å€¼ï¼Œå¯ä»¥åœ¨è°ƒç”¨çš„æ—¶å€™åŠ ä¸Šä¸€ä¸ª `!`ï¼Œæ¥éšå¼è§£æå¯é€‰ç±»å‹ï¼Œè¯¥å˜é‡å¯ä»¥è¢«å½“åšéå¯é€‰ç±»å‹æ¥ä½¿ç”¨ï¼Œå¹¶ä¸éœ€è¦æ¯æ¬¡éƒ½ä½¿ç”¨è§£ææ¥è·å–å¯é€‰å€¼

```swift
let possibleString: String? = "An optional string."
let forcedString: String = possibleString! // éœ€è¦æƒŠå¹å·æ¥è·å–å€¼
```

## æ‰“å°è¾“å‡º

ä½¿ç”¨ print æ‰“å°å†…å®¹

```swift
let foo = "Hello World"
print(foo)
// å¯ä»¥ç›´æ¥åœ¨å­—ç¬¦ä¸²ä¸­åµŒå…¥å˜é‡
print("The current value is \(foo)")
```

## æ¡ä»¶è¯­å¥

### if 

```swift
// å¸ƒå°”ç±»å‹
let orangesAreOrange = true
let turnipsAreDelicious = false

if turnipsAreDelicious {
    print("Mmm, tasty turnips!")
} else if orangesAreOrange {
    print("Eww, turnips are horrible.")
} else {
	print("Nothing")
}
```

å¦‚æœåœ¨éœ€è¦ä½¿ç”¨ Bool ç±»å‹çš„åœ°æ–¹ä½¿ç”¨äº†éå¸ƒå°”å€¼ï¼Œä¼šæŠ¥é”™

```swift
let i = 1
if i {
    // è¿™é‡Œä¼šæŠ¥é”™
}
```

### Switch

åŒ¹é…çš„ case åˆ†æ”¯ä¸­çš„ä»£ç æ‰§è¡Œå®Œæ¯•åï¼Œç¨‹åºä¼šç»ˆæ­¢switchè¯­å¥ï¼Œè€Œä¸ä¼šç»§ç»­æ‰§è¡Œä¸‹ä¸€ä¸ª case åˆ†æ”¯ã€‚è¿™ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸éœ€è¦åœ¨ case åˆ†æ”¯ä¸­æ˜¾å¼åœ°ä½¿ç”¨breakè¯­å¥

```swift
let someCharacter: Character = "z"
switch someCharacter {
case "a":
    print("The first letter of the alphabet")
case "z":
    print("The last letter of the alphabet")
default:
    print("Some other character")
}
```

case åˆ†æ”¯çš„æ¨¡å¼ä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªå€¼çš„åŒºé—´

```swift
let approximateCount = 62
var naturalCount: String
switch approximateCount {
case 0:
    naturalCount = "no"
case 1..<5:
    naturalCount = "a few"
case 5..<12:
    naturalCount = "several"
default:
    naturalCount = "many"
}
```

### Where

case åˆ†æ”¯çš„æ¨¡å¼å¯ä»¥ä½¿ç”¨whereè¯­å¥æ¥åˆ¤æ–­é¢å¤–çš„æ¡ä»¶ã€‚

```swift
let yetAnotherPoint = (1, -1)
switch yetAnotherPoint {
case let (x, y) where x == y:
    print("(\(x), \(y)) is on the line x == y")
case let (x, y) where x == -y:
    print("(\(x), \(y)) is on the line x == -y")
case let (x, y):
    print("(\(x), \(y)) is just some arbitrary point")
}
```

### å¤åˆåŒ¹é…ï¼ˆCompound Casesï¼‰

å½“å¤šä¸ªæ¡ä»¶å¯ä»¥ä½¿ç”¨åŒä¸€ç§æ–¹æ³•æ¥å¤„ç†æ—¶ï¼Œå¯ä»¥å°†è¿™å‡ ç§å¯èƒ½æ”¾åœ¨åŒä¸€ä¸ªcaseåé¢ï¼Œå¹¶ä¸”ç”¨é€—å·éš”å¼€ã€‚å½“caseåé¢çš„ä»»æ„ä¸€ç§æ¨¡å¼åŒ¹é…çš„æ—¶å€™ï¼Œè¿™æ¡åˆ†æ”¯å°±ä¼šè¢«åŒ¹é…ã€‚

```swift
let someCharacter: Character = "e"
switch someCharacter {
case "a", "e", "i", "o", "u":
    print("\(someCharacter) is a vowel")
case "b", "c", "d", "f", "g", "h", "j", "k", "l", "m",
     "n", "p", "q", "r", "s", "t", "v", "w", "x", "y", "z":
    print("\(someCharacter) is a consonant")
default:
    print("\(someCharacter) is not a vowel or a consonant")
}
```

## å¾ªç¯

### for å¾ªç¯

```swift
// 1åˆ°10ï¼Œæ­¥é•¿ä¸º1
for i in (1...10) {
    print(i)
}

// 1åˆ°10ï¼Œä¸åŒ…å«10ï¼Œæ­¥é•¿ä¸º1
for i in (1..<10) {
    print(i)
}

// 10åˆ°1ï¼Œæ­¥é•¿ä¸º1
for i in (1...10).reversed() {
    print(i)
}

// 0åˆ°10ï¼Œä¸åŒ…å«10ï¼Œæ­¥é•¿ä¸º2
for i in stride(from: 0, to: 10, by: 2) {
    print(i)
}

// 0åˆ°10ï¼ŒåŒ…å«10ï¼Œæ­¥é•¿ä¸º2
for i in stride(from: 0, through: 10, by: 2) {
    print(i)
}

// 0.5åˆ°10ï¼ŒåŒ…å«10ï¼Œæ­¥é•¿ä¸º2.5
for i in stride(from: 0.5, through: 10, by: 2.5) {
    print(i)
}
```

### while å¾ªç¯

```swift
while condition {  
    statements
}
```

### Repeat-While

```swift
repeat {
    statements
} while condition
```

## æ§åˆ¶è½¬ç§»è¯­å¥

æ§åˆ¶è½¬ç§»è¯­å¥æ”¹å˜ä½ ä»£ç çš„æ‰§è¡Œé¡ºåºï¼Œé€šè¿‡å®ƒå¯ä»¥å®ç°ä»£ç çš„è·³è½¬ã€‚Swift æœ‰äº”ç§æ§åˆ¶è½¬ç§»è¯­å¥ï¼š

- continue
- break
- fallthrough è´¯ç©¿
- return
- throw æŠ›å‡ºå¼‚å¸¸

å¦‚æœéœ€è¦è®© Switch çš„è¯­æ³•å…·æœ‰ C é£æ ¼çš„è´¯ç©¿çš„ç‰¹æ€§ï¼Œå¯ä»¥åœ¨æ¯ä¸ªéœ€è¦è¯¥ç‰¹æ€§çš„ case åˆ†æ”¯ä¸­ä½¿ç”¨fallthroughå…³é”®å­—ã€‚ä¸‹é¢çš„ä¾‹å­ä½¿ç”¨fallthroughæ¥åˆ›å»ºä¸€ä¸ªæ•°å­—çš„æè¿°è¯­å¥ã€‚

```swift
let integerToDescribe = 5
var description = "The number \(integerToDescribe) is"
switch integerToDescribe {
case 2, 3, 5, 7, 11, 13, 17, 19:
    description += " a prime number, and also"
    fallthrough
default:
    description += " an integer."
}
// è¾“å‡º "The number 5 is a prime number, and also an integer."
print(description)
```

## å­—ç¬¦ä¸²

å­—ç¬¦ä¸²ç”¨åŒå¼•å·

```swift
let someString = "Some string literal value"
```

åˆå§‹åŒ–ç©ºå­—ç¬¦ä¸²

```swift
var emptyString = ""               // ç©ºå­—ç¬¦ä¸²å­—é¢é‡
var anotherEmptyString = String()  // åˆå§‹åŒ–æ–¹æ³•
// ä¸¤ä¸ªå­—ç¬¦ä¸²å‡ä¸ºç©ºå¹¶ç­‰ä»·
```

å¯é€šè¿‡for-inå¾ªç¯æ¥éå†å­—ç¬¦ä¸²ä¸­çš„characterså±æ€§æ¥è·å–æ¯ä¸€ä¸ªå­—ç¬¦çš„å€¼ï¼š

```swift
for character in "Dog!".characters {
    print(character)
}
```

å­—ç¬¦ä¸²æ’å€¼ (String Interpolation) æ˜¯ä¸€ç§æ„å»ºæ–°å­—ç¬¦ä¸²çš„æ–¹å¼ï¼Œå¯ä»¥åœ¨å…¶ä¸­åŒ…å«å¸¸é‡ã€å˜é‡ã€å­—é¢é‡å’Œè¡¨è¾¾å¼ã€‚æ’å…¥çš„å­—ç¬¦ä¸²å­—é¢é‡çš„æ¯ä¸€é¡¹éƒ½åœ¨ä»¥åæ–œçº¿ä¸ºå‰ç¼€çš„åœ†æ‹¬å·ä¸­ï¼š

```swift
let multiplier = 3
let message = "\(multiplier) times 2.5 is \(Double(multiplier) * 2.5)"
// message is "3 times 2.5 is 7.5"
```

æ¯”è¾ƒå­—ç¬¦ä¸²å¯ä»¥ç”¨ç­‰äºæ“ä½œç¬¦(==)å’Œä¸ç­‰äºæ“ä½œç¬¦(!=)

```swift
if foo1 == foo2 {
    print("equal")
}
```

## æ•°ç»„

```swift
var someInts = [Int]()
someInts.append(3)

// åˆ›å»ºå¸¦æœ‰é»˜è®¤å€¼çš„æ•°ç»„
var threeDoubles = [Double](count: 3, repeatedValue:0.0)

var anotherThreeDoubles = [Double](count: 3, repeatedValue: 2.5)
// anotherThreeDoubles è¢«æ¨æ–­ä¸º [Double]ï¼Œç­‰ä»·äº [2.5, 2.5, 2.5]

// é€šè¿‡ä¸¤ä¸ªæ•°ç»„ç›¸åŠ åˆ›å»ºä¸€ä¸ªæ•°ç»„
var sixDoubles = threeDoubles + anotherThreeDoubles
// sixDoubles è¢«æ¨æ–­ä¸º [Double]ï¼Œç­‰ä»·äº [0.0, 0.0, 0.0, 2.5, 2.5, 2.5]

// ç”¨å­—é¢é‡æ„é€ æ•°ç»„
var shoppingList: [String] = ["Eggs", "Milk"]
```

éå†æ•°ç»„

```swift
for item in shoppingList {
    print(item)
}

// å¦‚æœåŒæ—¶éœ€è¦æ¯ä¸ªæ•°æ®é¡¹çš„å€¼å’Œç´¢å¼•å€¼
for (index, value) in shoppingList.enumerate() {
    print("Item \(String(index + 1)): \(value)")
}
```

## å…ƒç»„

å…ƒç»„ï¼ˆtuplesï¼‰æŠŠå¤šä¸ªå€¼ç»„åˆæˆä¸€ä¸ªå¤åˆå€¼ï¼Œå…ƒç»„å†…çš„å€¼å¯ä»¥æ˜¯ä»»æ„ç±»å‹ã€‚

```swift
let score0 = (90, 95)
// è®¿é—®å…ƒç»„ä¸­çš„å…ƒç´ ï¼Œæ²¡æœ‰åç§°æ—¶æŒ‰ç…§ä¸‹æ ‡
print(score0.0)

// å…ƒç»„ä¹Ÿå¯ä»¥ä¸ºé‡Œé¢çš„å…ƒç´ è®¾ç½®åç§°
let score1 = (chinese: 90, math: 95)
// è®¿é—®å…ƒç»„ä¸­çš„å…ƒç´ ï¼ŒæŒ‰ç…§åˆ†é‡çš„åç§°è®¿é—®
print(score1.chinese)

let score2 = (chinese: 90, math: 100)
// å…ƒç»„å¯ä»¥æ¯”è¾ƒï¼ŒæŒ‰ç…§å…ƒç»„ä¸­çš„å…ƒç´ ï¼Œä¸€ä¸ªä¸ªæ¯”è¾ƒ
score1 < score2
```

## é›†åˆ

ä¸€ä¸ªç±»å‹ä¸ºäº†å­˜å‚¨åœ¨é›†åˆä¸­ï¼Œè¯¥ç±»å‹å¿…é¡»æ˜¯å¯å“ˆå¸ŒåŒ–çš„--ä¹Ÿå°±æ˜¯è¯´ï¼Œè¯¥ç±»å‹å¿…é¡»æä¾›ä¸€ä¸ªæ–¹æ³•æ¥è®¡ç®—å®ƒçš„å“ˆå¸Œå€¼ã€‚ä¸€ä¸ªå“ˆå¸Œå€¼æ˜¯ Int ç±»å‹çš„ï¼Œç›¸ç­‰çš„å¯¹è±¡å“ˆå¸Œå€¼å¿…é¡»ç›¸åŒï¼Œæ¯”å¦‚a == b,å› æ­¤å¿…é¡»a.hashValue == b.hashValueã€‚

Swift çš„æ‰€æœ‰åŸºæœ¬ç±»å‹ (æ¯”å¦‚ String, Int, Double å’Œ Bool) é»˜è®¤éƒ½æ˜¯å¯å“ˆå¸ŒåŒ–çš„ï¼Œå¯ä»¥ä½œä¸ºé›†åˆçš„å€¼çš„ç±»å‹æˆ–è€…å­—å…¸çš„é”®çš„ç±»å‹ã€‚

```swift
var letters = Set<Character>()

// letters ç°åœ¨å«æœ‰1ä¸ª Character ç±»å‹çš„å€¼
letters.insert("a")

// letters ç°åœ¨æ˜¯ä¸€ä¸ªç©ºçš„ Set, ä½†æ˜¯å®ƒä¾ç„¶æ˜¯ Set<Character> ç±»å‹
letters = []

// ç”¨æ•°ç»„å­—é¢é‡åˆ›å»ºé›†åˆ
var favoriteGenres: Set<String> = ["Rock", "Classical", "Hip hop"]
```

## å­—å…¸

```swift
// namesOfIntegers æ˜¯ä¸€ä¸ªç©ºçš„ [Int: String] å­—å…¸
var namesOfIntegers = [Int: String]()
// namesOfIntegers ç°åœ¨åŒ…å«ä¸€ä¸ªé”®å€¼å¯¹
namesOfIntegers[16] = "sixteen"
// namesOfIntegers åˆæˆä¸ºäº†ä¸€ä¸ª [Int: String] ç±»å‹çš„ç©ºå­—å…¸
namesOfIntegers = [:]

// ç”¨å­—å…¸å­—é¢é‡åˆ›å»ºå­—å…¸
var airports: [String: String] = ["YYZ": "Toronto Pearson", "DUB": "Dublin"]
```

å­—å…¸éå†

```swift
for (key, value) in airports {
    print("\(key): \(value)")
}

for key in airports.keys {
    print("Airport code: \(key)")
}

for value in airports.values {
    print("Airport name: \(value)")
}
```

## åŸºæœ¬è¿ç®—ç¬¦

### ä¸‰ç›®è¿ç®—ç¬¦

```
é—®é¢˜ ? ç­”æ¡ˆ 1 : ç­”æ¡ˆ 2
```

### ç©ºåˆè¿ç®—ç¬¦ï¼ˆNil Coalescing Operatorï¼‰

ç©ºåˆè¿ç®—ç¬¦ï¼ˆa ?? bï¼‰å°†å¯¹å¯é€‰ç±»å‹ a è¿›è¡Œç©ºåˆ¤æ–­ï¼Œå¦‚æœ a åŒ…å«ä¸€ä¸ªå€¼å°±è¿›è¡Œè§£å°ï¼Œå¦åˆ™å°±è¿”å›ä¸€ä¸ªé»˜è®¤å€¼ bã€‚è¡¨è¾¾å¼ a å¿…é¡»æ˜¯ Optional ç±»å‹ã€‚é»˜è®¤å€¼ b çš„ç±»å‹å¿…é¡»è¦å’Œ a å­˜å‚¨å€¼çš„ç±»å‹ä¿æŒä¸€è‡´ã€‚

ç©ºåˆè¿ç®—ç¬¦æ˜¯å¯¹ä»¥ä¸‹ä»£ç çš„ç®€çŸ­è¡¨è¾¾æ–¹æ³•

```swift
a != nil ? a! : b
```

### åŒºé—´è¿ç®—ç¬¦ï¼ˆRange Operatorsï¼‰

é—­åŒºé—´è¿ç®—ç¬¦ï¼ˆa...bï¼‰å®šä¹‰ä¸€ä¸ªåŒ…å«ä» a åˆ° bï¼ˆåŒ…æ‹¬ a å’Œ bï¼‰çš„æ‰€æœ‰å€¼çš„åŒºé—´ã€‚a çš„å€¼ä¸èƒ½è¶…è¿‡ bã€‚ â€Œ é—­åŒºé—´è¿ç®—ç¬¦åœ¨è¿­ä»£ä¸€ä¸ªåŒºé—´çš„æ‰€æœ‰å€¼æ—¶æ˜¯éå¸¸æœ‰ç”¨çš„ï¼Œå¦‚åœ¨ for-in å¾ªç¯ä¸­ï¼š

```swift
for index in 1...5 {
    print("\(index) * 5 = \(index * 5)")
}
```

### åŠå¼€åŒºé—´è¿ç®—ç¬¦

åŠå¼€åŒºé—´ï¼ˆa..<bï¼‰å®šä¹‰ä¸€ä¸ªä» a åˆ° b ä½†ä¸åŒ…æ‹¬ b çš„åŒºé—´ã€‚ ä¹‹æ‰€ä»¥ç§°ä¸ºåŠå¼€åŒºé—´ï¼Œæ˜¯å› ä¸ºè¯¥åŒºé—´åŒ…å«ç¬¬ä¸€ä¸ªå€¼è€Œä¸åŒ…æ‹¬æœ€åçš„å€¼ã€‚

## é”™è¯¯å¤„ç†

è·Ÿ Java ç±»ä¼¼ï¼Œä¸€ä¸ªå‡½æ•°å¯ä»¥é€šè¿‡åœ¨å£°æ˜ä¸­æ·»åŠ  throws å…³é”®è¯æ¥æŠ›å‡ºé”™è¯¯æ¶ˆæ¯

```swift
func canThrowAnError() throws {
    // è¿™ä¸ªå‡½æ•°æœ‰å¯èƒ½æŠ›å‡ºé”™è¯¯
}
```

å½“å‡½æ•°å¯èƒ½èƒ½æŠ›å‡ºé”™è¯¯æ¶ˆæ¯æ—¶, åº”è¯¥åœ¨è¡¨è¾¾å¼ä¸­å‰ç½® try å…³é”®è¯

```swift
do {
    try canThrowAnError()
    // æ²¡æœ‰é”™è¯¯æ¶ˆæ¯æŠ›å‡º
} catch {
    // æœ‰ä¸€ä¸ªé”™è¯¯æ¶ˆæ¯æŠ›å‡º
}

// æ•è·å…·ä½“çš„å¼‚å¸¸
do {
    try makeASandwich()
    eatASandwich()
} catch SandwichError.outOfCleanDishes {
    washDishes()
} catch SandwichError.missingIngredients(let ingredients) {
    buyGroceries(ingredients)
}
```

## æ–­è¨€

```swift
let age = -3
assert(age >= 0, "A person's age cannot be less than zero")
// å› ä¸º age < 0ï¼Œæ‰€ä»¥æ–­è¨€ä¼šè§¦å‘
```

## å‚è€ƒæ–‡çŒ®

- http://www.swift51.com/swift3.0/
