{"version":3,"sources":["universe.js"],"names":["window","requestAnimationFrame","mozRequestAnimationFrame","webkitRequestAnimationFrame","msRequestAnimationFrame","starDensity","speedCoeff","width","height","starCount","circleRadius","circleCenter","first","giantColor","starColor","cometColor","canva","document","getElementById","stars","universe","windowResizeHandler","addEventListener","createUniverse","getContext","i","Star","reset","draw","clearRect","starsLength","length","star","move","fadeIn","fadeOut","giant","getProbability","comet","x","getRandInterval","y","r","dx","dy","fadingOut","fadingIn","opacity","opacityTresh","do","beginPath","fillStyle","arc","Math","PI","rect","fill","closePath","setTimeout","percents","floor","random","min","max","innerWidth","innerHeight","setAttribute"],"mappings":"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","file":"universe.js","sourcesContent":["window.requestAnimationFrame = window.requestAnimationFrame || window.mozRequestAnimationFrame ||\n  window.webkitRequestAnimationFrame || window.msRequestAnimationFrame;\n\nvar starDensity = .216;\nvar speedCoeff = .05;\nvar width;\nvar height;\nvar starCount;\nvar circleRadius;\nvar circleCenter;\nvar first = true;\nvar giantColor = '180,184,240';\nvar starColor = '226,225,142';\nvar cometColor = '226,225,224';\nvar canva = document.getElementById('universe');\nvar stars = [];\nvar universe;\n\nwindowResizeHandler();\nwindow.addEventListener('resize', windowResizeHandler, false);\n\ncreateUniverse();\n\nfunction createUniverse() {\n  universe = canva.getContext('2d');\n\n  for (var i = 0; i < starCount; i++) {\n    stars[i] = new Star();\n    stars[i].reset();\n  }\n\n  draw();\n}\n\nfunction draw() {\n  universe.clearRect(0, 0, width, height);\n\n  var starsLength = stars.length;\n\n  for (var i = 0; i < starsLength; i++) {\n    var star = stars[i];\n    star.move();\n    star.fadeIn();\n    star.fadeOut();\n    star.draw();\n  }\n\n  window.requestAnimationFrame(draw);\n}\n\nfunction Star() {\n\n  this.reset = function() {\n    this.giant = getProbability(3);\n    this.comet = this.giant || first ? false : getProbability(10);\n    this.x = getRandInterval(0, width - 10);\n    this.y = getRandInterval(0, height);\n    this.r = getRandInterval(1.1, 2.6);\n    this.dx = getRandInterval(speedCoeff, 6 * speedCoeff) + (this.comet + 1 - 1) * speedCoeff * getRandInterval(50, 120) + speedCoeff * 2;\n    this.dy = -getRandInterval(speedCoeff, 6 * speedCoeff) - (this.comet + 1 - 1) * speedCoeff * getRandInterval(50, 120);\n    this.fadingOut = null;\n    this.fadingIn = true;\n    this.opacity = 0;\n    this.opacityTresh = getRandInterval(.2, 1 - (this.comet + 1 - 1) * .4);\n    this.do = getRandInterval(0.0005, 0.002) + (this.comet + 1 - 1) * .001;\n  };\n\n  this.fadeIn = function() {\n    if (this.fadingIn) {\n      this.fadingIn = this.opacity > this.opacityTresh ? false : true;\n      this.opacity += this.do;\n    }\n  };\n\n  this.fadeOut = function() {\n    if (this.fadingOut) {\n      this.fadingOut = this.opacity < 0 ? false : true;\n      this.opacity -= this.do / 2;\n      if (this.x > width || this.y < 0) {\n        this.fadingOut = false;\n        this.reset();\n      }\n    }\n  };\n\n  this.draw = function() {\n    universe.beginPath();\n\n    if (this.giant) {\n      universe.fillStyle = 'rgba(' + giantColor + ',' + this.opacity + ')';\n      universe.arc(this.x, this.y, 2, 0, 2 * Math.PI, false);\n    } else if (this.comet) {\n      universe.fillStyle = 'rgba(' + cometColor + ',' + this.opacity + ')';\n      universe.arc(this.x, this.y, 1.5, 0, 2 * Math.PI, false);\n\n      //comet tail\n      for (var i = 0; i < 30; i++) {\n        universe.fillStyle = 'rgba(' + cometColor + ',' + (this.opacity - (this.opacity / 20) * i) + ')';\n        universe.rect(this.x - this.dx / 4 * i, this.y - this.dy / 4 * i - 2, 2, 2);\n        universe.fill();\n      }\n    } else {\n      universe.fillStyle = 'rgba(' + starColor + ',' + this.opacity + ')';\n      universe.rect(this.x, this.y, this.r, this.r);\n    }\n\n    universe.closePath();\n    universe.fill();\n  };\n\n  this.move = function() {\n    this.x += this.dx;\n    this.y += this.dy;\n    if (this.fadingOut === false) {\n      this.reset();\n    }\n    if (this.x > width - (width / 4) || this.y < 0) {\n      this.fadingOut = true;\n    }\n  };\n\n  (function() {\n    setTimeout(function() {\n      first = false;\n    }, 50)\n  })()\n}\n\nfunction getProbability(percents) {\n  return ((Math.floor(Math.random() * 1000) + 1) < percents * 10);\n}\n\nfunction getRandInterval(min, max) {\n  return (Math.random() * (max - min) + min);\n}\n\nfunction windowResizeHandler() {\n  width = window.innerWidth;\n  height = window.innerHeight;\n  starCount = width * starDensity;\n  // console.log(starCount)\n  circleRadius = (width > height ? height / 2 : width / 2);\n  circleCenter = {\n    x: width / 2,\n    y: height / 2\n  }\n\n  canva.setAttribute('width', width);\n  canva.setAttribute('height', height);\n}"]}